<div
  class="border border-gray-300 rounded-lg p-4 mb-3 bg-white shadow-sm hover:shadow-md transition-shadow"
  [class.bg-red-50]="isPastDue"
  [class.border-red-300]="isPastDue"
>
  <div class="flex items-start gap-3">
    <input
      type="checkbox"
      [checked]="todo.completed"
      (change)="onToggle()"
      class="mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
      [attr.aria-label]="'Mark ' + todo.title + ' as ' + (todo.completed ? 'incomplete' : 'complete')"
    />
    <div class="flex-1">
      <div class="flex items-center gap-2 mb-1">
        <h3
          class="text-lg font-medium"
          [class.line-through]="todo.completed"
          [class.text-gray-500]="todo.completed"
        >
          {{ todo.title }}
        </h3>
        <span
          class="px-2 py-1 text-xs font-semibold rounded"
          [class.bg-blue-100]="todo.priority === 1"
          [class.text-blue-800]="todo.priority === 1"
          [class.bg-yellow-100]="todo.priority === 2"
          [class.text-yellow-800]="todo.priority === 2"
          [class.bg-gray-100]="todo.priority >= 3"
          [class.text-gray-800]="todo.priority >= 3"
        >
          Priority {{ todo.priority }}
        </span>
      </div>
      <div class="flex items-center gap-2 text-sm text-gray-600">
        <span [class.text-red-600]="isPastDue" [class.font-semibold]="isPastDue">
          Due: {{ formatDate(todo.dueDate) }}
        </span>
        <span *ngIf="isPastDue" class="px-2 py-0.5 bg-red-100 text-red-800 text-xs font-semibold rounded">
          Past Due
        </span>
      </div>
    </div>
    <div class="flex gap-2">
      <button
        (click)="onEdit()"
        class="px-3 py-1 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors"
        aria-label="Edit"
      >
        Edit
      </button>
      <button
        (click)="onDelete()"
        class="px-3 py-1 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors"
        aria-label="Delete"
      >
        Delete
      </button>
    </div>
  </div>
</div>
